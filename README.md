# AI 摄影视角工作站 (AI Studio Photography Simulator) - 本地部署指南

这是一个基于 React 19、Three.js 和 Google Gemini 3 旗舰模型构建的高级摄影模拟器。它允许用户通过 3D 相机操控界面，精准定义拍摄视角，并利用 AI 生成符合该视角的商业级摄影图像。

---

## 🚀 环境要求

在开始之前，请确保您的电脑已安装以下环境：

- **Node.js**: 建议版本 v18.0 或更高 (LTS)。
- **包管理器**: npm, yarn 或 pnpm。
- **浏览器**: 支持 WebGL 的现代浏览器（推荐 Chrome 或 Edge）。
- **Google AI 账号**: 需要有效的 [Gemini API Key](https://aistudio.google.com/app/apikey)。
  - **重要说明**: 使用 `gemini-3-pro-image-preview` 模型通常需要绑定了付款方式的 Google Cloud 项目。

---

## 📂 项目结构

请按照以下结构在本地创建文件夹和文件：

```text
project-root/
├── index.html
├── index.tsx
├── App.tsx
├── types.ts
├── metadata.json
├── package.json          # 需要手动创建
├── vite.config.ts        # 需要手动创建
├── .env                  # 存放 API Key
├── components/
│   └── ThreeScene.tsx
└── services/
    ├── geminiService.ts
    └── promptService.ts
```

---

## 🛠️ 关键配置文件

### 1. package.json
在根目录创建 `package.json`，用于管理依赖：

```json
{
  "name": "ai-photography-simulator",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@google/genai": "^1.40.0",
    "@react-three/drei": "^10.7.7",
    "@react-three/fiber": "^9.5.0",
    "lucide-react": "^0.563.0",
    "react": "^19.2.4",
    "react-dom": "^19.2.4",
    "three": "^0.182.0"
  },
  "devDependencies": {
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "@types/three": "^0.182.0",
    "@vitejs/plugin-react": "^4.3.0",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.4.5",
    "vite": "^5.2.11"
  }
}
```

### 2. vite.config.ts
用于构建和开发服务器配置：

```typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  define: {
    'process.env': {}
  }
});
```

---

## 🔑 配置 API Key

在根目录创建一个名为 `.env` 的文件，并填入您的 API Key：

```env
VITE_GEMINI_API_KEY=您的_GEMINI_API_KEY
```

> **注意**: 在本地代码中，您需要确保 `geminiService.ts` 能够访问此变量。如果使用 Vite，通常通过 `import.meta.env.VITE_GEMINI_API_KEY` 访问。

---

## 🏃 安装与启动

请在终端中执行以下命令：

1. **安装依赖**:
   ```bash
   npm install
   ```

2. **启动开发服务器**:
   ```bash
   npm run dev
   ```

3. **访问应用**:
   打开浏览器并访问 `http://localhost:5173` (或终端显示的地址)。

---

## 💡 使用说明

1. **选择主题**: 点击左上角的 ☀️/🌙 切换明亮或暗夜模式。
2. **上传素材**: 在左侧“素材管理”区域点击上传您想要重绘的原始图片。
3. **操控相机**: 
   - 在 3D 视图中拖拽以调整 **水平(H)** 和 **垂直(V)** 角度。
   - 使用滚轮或滑块调整 **工作距离 (Distance)** 和 **焦距 (Zoom)**。
4. **锁定视角**: 调整完成后，点击“锁定视角”以防止误触。
5. **渲染**: 
   - 选择所需的“画幅比例”和“渲染质量”（1K/2K/4K）。
   - 点击“执行渲染”按钮，等待 AI 根据您的透视参数重绘图像。
6. **下载作品**: 在左侧“渲染历史”中，将鼠标悬停在图片上并点击下载图标。

---

## ⚠️ 常见问题

- **WebGL 报错**: 请检查浏览器是否开启硬件加速，或显卡驱动是否需要更新。
- **404/API 错误**: 请确保您的 API Key 是有效的，并且您的网络环境可以正常访问 Google 服务。
- **4K 渲染慢**: 4K 属于重度计算任务，生成可能需要 15-30 秒，请保持页面激活。

---
*Generated by AI Studio Photography Simulator Team*